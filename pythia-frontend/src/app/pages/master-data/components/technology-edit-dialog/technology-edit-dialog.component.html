<div class="dialog-container">
  <div class="dialog-header">
    <h2 mat-dialog-title class="dialog-title">
      <mat-icon class="title-icon">{{ isEditMode ? 'edit' : 'add_circle' }}</mat-icon>
      {{ dialogTitle }}
    </h2>
    <button
      mat-icon-button
      class="close-button"
      (click)="onCancel()"
      aria-label="Close dialog">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <form [formGroup]="technologyForm" (ngSubmit)="onSubmit()">
    <mat-dialog-content class="dialog-content">
      <!-- Name Field -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Technology Name</mat-label>
        <input
          matInput
          formControlName="name"
          placeholder="e.g., Angular, React, Kotlin"
          maxlength="100"
          required
          autocomplete="off"
          [attr.aria-label]="'Technology name'"
          [attr.aria-describedby]="hasError('name', 'required') || hasError('name', 'minlength') ? 'name-error' : null"
          [attr.aria-invalid]="technologyForm.get('name')?.invalid && technologyForm.get('name')?.touched">
        <mat-icon matPrefix class="field-icon">code</mat-icon>
        <mat-hint align="end">{{ technologyForm.get('name')?.value?.length || 0 }}/100</mat-hint>
        @if (getErrorMessage('name')) {
          <mat-error id="name-error">{{ getErrorMessage('name') }}</mat-error>
        }
      </mat-form-field>

      <!-- Code Field -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Code</mat-label>
        <input
          matInput
          formControlName="code"
          placeholder="e.g., BACKEND, FRONTEND, MOBILE"
          maxlength="50"
          autocomplete="off"
          [attr.aria-label]="'Technology code'">
        <mat-icon matPrefix class="field-icon">tag</mat-icon>
        <mat-hint align="end">{{ technologyForm.get('code')?.value?.length || 0 }}/50</mat-hint>
        @if (getErrorMessage('code')) {
          <mat-error id="code-error">{{ getErrorMessage('code') }}</mat-error>
        }
      </mat-form-field>

      <!-- Description Field -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Description</mat-label>
        <textarea
          matInput
          formControlName="description"
          placeholder="Brief description of the technology and its primary use cases"
          rows="4"
          maxlength="500"
          required
          [attr.aria-label]="'Technology description'"
          [attr.aria-describedby]="hasError('description', 'required') || hasError('description', 'minlength') ? 'description-error' : null"
          [attr.aria-invalid]="technologyForm.get('description')?.invalid && technologyForm.get('description')?.touched">
        </textarea>
        <mat-icon matPrefix class="field-icon">description</mat-icon>
        <mat-hint align="end">{{ technologyForm.get('description')?.value?.length || 0 }}/500</mat-hint>
        @if (getErrorMessage('description')) {
          <mat-error id="description-error">{{ getErrorMessage('description') }}</mat-error>
        }
      </mat-form-field>

      <!-- Category Display (Read-only) -->
      <div class="info-section">
        <mat-icon class="info-icon">label</mat-icon>
        <div class="info-content">
          <span class="info-label">Category</span>
          <span class="info-value">Technologies</span>
        </div>
      </div>
    </mat-dialog-content>

    <mat-dialog-actions class="dialog-actions">
      <button
        mat-button
        type="button"
        class="cancel-button"
        (click)="onCancel()">
        Cancel
      </button>
      <button
        mat-raised-button
        color="primary"
        type="submit"
        class="submit-button"
        [disabled]="technologyForm.invalid">
        <mat-icon>{{ isEditMode ? 'save' : 'add' }}</mat-icon>
        {{ submitButtonText }}
      </button>
    </mat-dialog-actions>
  </form>
</div>
