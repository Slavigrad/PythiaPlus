<div class="candidate-list-container">
  <!-- Results Header -->
  <div class="results-header" role="status" aria-live="polite">
    <h2 class="results-title">
      {{ candidates().length }}
      {{ candidates().length === 1 ? 'candidate' : 'candidates' }} found
      @if (selectionCount() > 0) {
        <span class="selection-indicator"> â€¢ {{ selectionCount() }} selected</span>
      }
    </h2>
    <p class="results-subtitle">Sorted by relevance</p>
  </div>

  <!-- Candidate Cards (Viewport-based Lazy Loading) -->
  <div class="candidate-list" role="region" aria-label="Search results">
    @for (candidate of candidates(); track candidate.id) {
      @defer (on viewport; prefetch on idle) {
        <app-candidate-card
          [candidate]="candidate"
          [selectable]="selectable()"
          [isSelected]="isSelected(candidate.id)"
          [selectionDisabled]="maxSelectionsReached() && !isSelected(candidate.id)"
          (candidateSelected)="handleCandidateSelected($event)"
          (selectionToggle)="handleSelectionToggle($event)" />
      } @placeholder {
        <app-skeleton-card />
      } @loading (minimum 100ms) {
        <app-skeleton-card />
      }
    } @empty {
      <p class="no-candidates" role="status">No candidates to display</p>
    }
  </div>
</div>
