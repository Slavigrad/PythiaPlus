/**
 * Constellation View Styles
 * 3D cosmic visualization of projects as glowing orbs
 */

:host {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

.constellation-view {
  position: relative;
  width: 100%;
  height: 100%;
  background: radial-gradient(ellipse at center, #1a1a2e 0%, #0a0a1a 100%);
}

// ============================================================================
// CANVAS CONTAINER
// ============================================================================

.canvas-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  cursor: grab;

  &:active {
    cursor: grabbing;
  }

  canvas {
    display: block;
    width: 100%;
    height: 100%;
  }
}

// ============================================================================
// OVERLAY UI
// ============================================================================

.overlay-ui {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 10;
}

// ============================================================================
// INFO PANEL (Top Left)
// ============================================================================

.info-panel {
  position: absolute;
  top: var(--spacing-lg);
  left: var(--spacing-lg);
  background: rgba(26, 26, 46, 0.9);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-lg);
  padding: var(--spacing-md) var(--spacing-lg);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  pointer-events: auto;
  transition: all 0.3s ease;

  &:hover {
    background: rgba(26, 26, 46, 0.95);
    border-color: rgba(220, 38, 38, 0.3);
    box-shadow: 0 8px 32px rgba(220, 38, 38, 0.2);
  }
}

.panel-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-xs);

  svg {
    width: 24px;
    height: 24px;
    color: var(--color-primary-500);
    filter: drop-shadow(0 0 8px rgba(220, 38, 38, 0.6));
    animation: star-pulse 3s ease-in-out infinite;
  }

  h3 {
    margin: 0;
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-bold);
    color: white;
    text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
  }
}

.project-count {
  margin: 0;
  font-size: var(--font-size-sm);
  color: rgba(255, 255, 255, 0.7);
  padding-left: 32px;
}

// ============================================================================
// CONTROLS HELP (Bottom Left)
// ============================================================================

.controls-help {
  position: absolute;
  bottom: var(--spacing-lg);
  left: var(--spacing-lg);
  background: rgba(26, 26, 46, 0.9);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-lg);
  padding: var(--spacing-md) var(--spacing-lg);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  pointer-events: auto;

  h4 {
    margin: 0 0 var(--spacing-sm) 0;
    font-size: var(--font-size-md);
    font-weight: var(--font-weight-semibold);
    color: white;
  }
}

.control-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-xs) 0;
  font-size: var(--font-size-sm);
  color: rgba(255, 255, 255, 0.8);

  svg {
    width: 18px;
    height: 18px;
    color: var(--color-primary-500);
    flex-shrink: 0;
  }

  span {
    white-space: nowrap;
  }
}

// ============================================================================
// STATUS LEGEND (Bottom Right)
// ============================================================================

.status-legend {
  position: absolute;
  bottom: var(--spacing-lg);
  right: var(--spacing-lg);
  background: rgba(26, 26, 46, 0.9);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-lg);
  padding: var(--spacing-md) var(--spacing-lg);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  pointer-events: auto;

  h4 {
    margin: 0 0 var(--spacing-sm) 0;
    font-size: var(--font-size-md);
    font-weight: var(--font-weight-semibold);
    color: white;
  }
}

.legend-item {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-xs) 0;
  font-size: var(--font-size-sm);
  color: rgba(255, 255, 255, 0.8);
}

.legend-dot {
  width: 12px;
  height: 12px;
  border-radius: var(--radius-full);
  flex-shrink: 0;
  box-shadow: 0 0 12px currentColor;
  animation: glow-pulse 2s ease-in-out infinite;

  &.active {
    background-color: #10B981;
    color: #10B981;
  }

  &.completed {
    background-color: #3B82F6;
    color: #3B82F6;
  }

  &.planning {
    background-color: #F59E0B;
    color: #F59E0B;
  }

  &.on-hold {
    background-color: #6B7280;
    color: #6B7280;
  }

  &.cancelled {
    background-color: #DC2626;
    color: #DC2626;
  }
}

.legend-label {
  white-space: nowrap;
}

// ============================================================================
// ANIMATIONS
// ============================================================================

@keyframes star-pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.1);
    opacity: 0.8;
  }
}

@keyframes glow-pulse {
  0%, 100% {
    box-shadow: 0 0 12px currentColor;
    opacity: 1;
  }
  50% {
    box-shadow: 0 0 20px currentColor;
    opacity: 0.8;
  }
}

// ============================================================================
// RESPONSIVE
// ============================================================================

@media (max-width: 1024px) {
  .info-panel,
  .controls-help,
  .status-legend {
    padding: var(--spacing-sm) var(--spacing-md);
  }

  .panel-header h3 {
    font-size: var(--font-size-md);
  }

  .controls-help h4,
  .status-legend h4 {
    font-size: var(--font-size-sm);
  }
}

@media (max-width: 768px) {
  .info-panel {
    top: var(--spacing-md);
    left: var(--spacing-md);
  }

  .controls-help {
    bottom: var(--spacing-md);
    left: var(--spacing-md);
  }

  .status-legend {
    bottom: var(--spacing-md);
    right: var(--spacing-md);
    max-width: 140px;
  }

  .legend-item,
  .control-item {
    font-size: var(--font-size-xs);
  }

  .panel-header svg {
    width: 20px;
    height: 20px;
  }
}

// ============================================================================
// LOADING STATE
// ============================================================================

.constellation-view--loading {
  .canvas-container {
    cursor: wait;
  }

  .overlay-ui::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 60px;
    height: 60px;
    border: 3px solid rgba(255, 255, 255, 0.1);
    border-top-color: var(--color-primary-500);
    border-radius: var(--radius-full);
    animation: spinner-rotate 1s linear infinite;
  }
}

@keyframes spinner-rotate {
  from {
    transform: translate(-50%, -50%) rotate(0deg);
  }
  to {
    transform: translate(-50%, -50%) rotate(360deg);
  }
}
