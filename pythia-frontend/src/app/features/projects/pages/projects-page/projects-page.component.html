<!-- Projects Page - The Oracle's Project Universe -->
<div class="projects-page">
  <!-- Header with View Mode Switcher -->
  <header class="projects-header">
    <div class="header-content">
      <div class="header-title">
        <svg class="oracle-eye" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
        </svg>
        <div class="title-text">
          <h1>Projects Oracle</h1>
          <p class="subtitle">Your Technical Empire</p>
        </div>
      </div>

      <div class="view-mode-switcher">
        <button
          class="view-mode-btn"
          [class.active]="viewMode() === 'constellation'"
          (click)="switchViewMode('constellation')"
          aria-label="Constellation View"
          title="Constellation View - 3D Visualization">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
          </svg>
          <span>Constellation</span>
        </button>

        <button
          class="view-mode-btn"
          [class.active]="viewMode() === 'command'"
          (click)="switchViewMode('command')"
          aria-label="Command Center View"
          title="Command Center - List View">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/>
          </svg>
          <span>Command Center</span>
        </button>

        <button
          class="view-mode-btn"
          [class.active]="viewMode() === 'analytics'"
          (click)="switchViewMode('analytics')"
          aria-label="Analytics Temple View"
          title="Analytics Temple - Insights Dashboard">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
          </svg>
          <span>Analytics</span>
        </button>
      </div>

      <div class="header-stats">
        <div class="stat-badge">
          <span class="stat-value">{{ totalProjects }}</span>
          <span class="stat-label">Projects</span>
        </div>
      </div>
    </div>
  </header>

  <!-- Loading State -->
  @if (isLoading) {
    <div class="loading-container">
      <div class="oracle-loading">
        <svg class="spinning-eye" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
        </svg>
        <p>The Oracle is awakening...</p>
      </div>
    </div>
  }

  <!-- Error State -->
  @else if (error()) {
    <div class="error-container">
      <div class="error-message">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
        </svg>
        <h3>Oracle Connection Lost</h3>
        <p>{{ error() }}</p>
        <button class="retry-button" (click)="loadProjects()">
          Reconnect
        </button>
      </div>
    </div>
  }

  <!-- View Content -->
  @else {
    <main class="projects-content">
      <!-- Constellation View (Phase 3) -->
      @if (viewMode() === 'constellation') {
        <div class="constellation-view">
          <div class="coming-soon">
            <svg class="oracle-eye" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
            <h2>Constellation View</h2>
            <p>3D visualization coming in Phase 3...</p>
            <p class="subtitle">Projects will appear as glowing orbs in a cosmic canvas</p>
          </div>
        </div>
      }

      <!-- Command Center View (Phase 2) -->
      @else if (viewMode() === 'command') {
        <div class="command-center-view">
          <div class="projects-summary">
            <h2>{{ projectsService.projects().length }} Projects</h2>
            <p>{{ projectsService.analytics()?.activeProjects ?? 0 }} Active â€¢
               {{ projectsService.analytics()?.completedProjects ?? 0 }} Completed</p>
          </div>

          <!-- Enhanced project list with ProjectCard component -->
          <div class="projects-grid">
            @for (project of projectsService.projects(); track project.id) {
              <app-project-card
                [project]="project"
                variant="compact"
                [showActions]="true"
                (cardClick)="handleProjectClick($event)"
                (viewDetails)="handleViewDetails($event)"
                (edit)="handleEditProject($event)"
                (delete)="handleDeleteProject($event)" />
            } @empty {
              <div class="empty-state">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                </svg>
                <h3>No Projects Found</h3>
                <p>Start by creating your first project</p>
              </div>
            }
          </div>
        </div>
      }

      <!-- Analytics Temple View (Phase 4) -->
      @else if (viewMode() === 'analytics') {
        <div class="analytics-temple-view">
          <div class="coming-soon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
            </svg>
            <h2>Analytics Temple</h2>
            <p>Data visualization coming in Phase 4...</p>
            <p class="subtitle">Charts, trends, and insights await</p>
          </div>
        </div>
      }
    </main>
  }
</div>
