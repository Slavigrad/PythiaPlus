<div class="employee-list-page">
  <div class="page-header">
    <div class="header-content">
      <div class="header-text">
        <h1 class="page-title">Employees</h1>
        <p class="page-subtitle">Browse all employees in the talent pool</p>
      </div>
      <div class="header-actions">
        <app-employee-create-button (createClick)="onCreateEmployee()" />
      </div>
    </div>
  </div>

  <!-- Loading State -->
  @if (loading()) {
    <div class="employee-grid">
      @for (i of [1, 2, 3, 4, 5, 6]; track i) {
        <div class="employee-card skeleton">
          <app-skeleton-loader [height]="200" [borderRadius]="'8px'" />
        </div>
      }
    </div>
  }

  <!-- Error State -->
  @else if (error()) {
    <div class="error-state">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="error-icon">
        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
      </svg>
      <h2 class="error-title">Unable to load employees</h2>
      <p class="error-message">{{ error() }}</p>
      <button class="retry-button" (click)="employeeService.getEmployees()">
        Try Again
      </button>
    </div>
  }

  <!-- Empty State -->
  @else if (employees().length === 0) {
    <div class="empty-state">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="empty-icon">
        <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
      </svg>
      <h2 class="empty-title">No employees found</h2>
      <p class="empty-message">There are currently no employees in the system.</p>
    </div>
  }

  <!-- Employee Grid -->
  @else {
    <div class="employee-grid">
      @for (employee of employees(); track employee.id) {
        <article
          class="employee-card"
          (click)="navigateToEmployee(employee.id)"
          (keydown.enter)="navigateToEmployee(employee.id)"
          [attr.tabindex]="0"
          role="button"
          [attr.aria-label]="'View profile for ' + employee.fullName"
        >
          <!-- Profile Picture or Initials -->
          <div class="card-header">
            <div class="profile-container">
              @if (employee.profilePicture && employee.profilePicture.startsWith('http')) {
                <img
                  [src]="employee.profilePicture"
                  [alt]="employee.fullName"
                  class="profile-picture"
                  (error)="onImageError($event)"
                />
              }
              <!-- Always render initials as fallback -->
              <div
                class="profile-initials"
                [style.background]="getInitialsColor(employee.fullName)"
              >
                {{ getInitials(employee.fullName) }}
              </div>
            </div>
            <span
              class="availability-badge"
              [class]="getAvailabilityClass(employee.availability)"
            >
              {{ formatAvailability(employee.availability) }}
            </span>
          </div>

          <!-- Employee Info -->
          <div class="card-body">
            <h3 class="employee-name">{{ employee.fullName }}</h3>
            <p class="employee-title">{{ employee.title }}</p>

            <div class="employee-details">
              <div class="detail-item">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                </svg>
                <span>{{ employee.city }}, {{ employee.country }}</span>
              </div>

              <div class="detail-item">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z"/>
                </svg>
                <span>{{ employee.department }}</span>
              </div>

              <div class="detail-item">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
                </svg>
                <span>{{ employee.yearsExperience }} years</span>
              </div>
            </div>

            <p class="employee-summary">{{ employee.summary }}</p>
          </div>

          <!-- Seniority Badge -->
          <div class="card-footer">
            <span class="seniority-badge">{{ employee.seniority }}</span>
          </div>
        </article>
      }
    </div>
  }
</div>
