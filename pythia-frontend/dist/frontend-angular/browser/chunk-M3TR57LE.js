import{g as K,h as I,i as R,j as H,k as A,l as W,m as B,n as F,o as G,p as V}from"./chunk-L5Z7MUNN.js";import{$ as b,$a as n,Eb as L,Fb as D,Ga as E,Gb as N,Jb as u,T as P,Ua as d,Ya as T,Za as z,_ as h,_a as m,ab as r,bb as v,ga as p,gb as g,jb as f,lb as c,mb as x,nb as k,pb as _,qb as S,rb as M,ta as a,xb as C,zb as O}from"./chunk-DCDVTS7G.js";var U=(l,o)=>o.value;function q(l,o){if(l&1&&(n(0,"option",11),c(1),r()),l&2){let t=o.$implicit;m("value",t.value),a(),x(t.label)}}var Y=class l{searchService=P(I);initialTopK=O(10);initialMinScore=O(.7);isExpanded=p(!1);topK=p(10);minScore=p(.7);isInitialized=!1;topKOptions=L;constructor(){C(()=>{let o=this.initialTopK(),t=this.initialMinScore();!this.isInitialized&&(o!==10||t!==.7)&&(this.topK.set(o),this.minScore.set(t),this.isInitialized=!0)}),C(()=>{let o=this.searchService.lastQuery(),t=this.topK(),e=this.minScore();o&&o.length>=3&&this.searchService.search({query:o,topK:t,minScore:e})})}toggleExpanded(){this.isExpanded.update(o=>!o)}getScoreLabel(o){return o>=D?u.EXCELLENT:o>=N?u.GOOD:u.WIDE}getScorePercentage(o){return Math.round(o*100)}static \u0275fac=function(t){return new(t||l)};static \u0275cmp=E({type:l,selectors:[["app-search-options"]],inputs:{initialTopK:[1,"initialTopK"],initialMinScore:[1,"initialMinScore"]},decls:30,vars:18,consts:[[1,"search-options"],["type","button","aria-controls","options-panel",1,"options-toggle",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor","aria-hidden","true",1,"gear-icon"],["d","M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94L14.4 2.81c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor","aria-hidden","true",1,"chevron-icon"],["d","M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"],["id","options-panel",1,"options-panel"],[1,"options-content"],[1,"option-group"],["for","topK",1,"option-label"],["id","topK",1,"option-select",3,"ngModelChange","ngModel","value"],[3,"value"],["for","minScore",1,"option-label"],["aria-hidden","true",1,"score-value"],[1,"slider-container"],["type","range","id","minScore","min","0.5","max","1.0","step","0.05",1,"score-slider",3,"ngModelChange","ngModel","value"],["aria-hidden","true",1,"slider-labels"],[1,"slider-label"],[1,"slider-label","middle"]],template:function(t,e){t&1&&(n(0,"div",0)(1,"button",1),g("click",function(){return e.toggleExpanded()}),h(),n(2,"svg",2),v(3,"path",3),r(),b(),n(4,"span"),c(5,"Advanced options"),r(),h(),n(6,"svg",4),v(7,"path",5),r()(),b(),n(8,"div",6)(9,"div",7)(10,"div",8)(11,"label",9),c(12,"Show me"),r(),n(13,"select",10),M("ngModelChange",function(i){return S(e.topK,i)||(e.topK=i),i}),g("ngModelChange",function(i){return e.topK.set(i)}),T(14,q,2,2,"option",11,U),r()(),n(16,"div",8)(17,"label",12),c(18," Minimum match quality "),n(19,"span",13),c(20),r()(),n(21,"div",14)(22,"input",15),M("ngModelChange",function(i){return S(e.minScore,i)||(e.minScore=i),i}),g("ngModelChange",function(i){return e.minScore.set(i)}),r(),n(23,"div",16)(24,"span",17),c(25,"50%"),r(),n(26,"span",18),c(27),r(),n(28,"span",17),c(29,"100%"),r()()()()()()()),t&2&&(a(),d("aria-expanded",e.isExpanded())("aria-label",e.isExpanded()?"Hide advanced search options":"Show advanced search options"),a(5),f("expanded",e.isExpanded()),a(2),f("expanded",e.isExpanded()),d("aria-hidden",!e.isExpanded()),a(5),_("ngModel",e.topK),m("value",e.topK()),a(),z(e.topKOptions),a(6),k("",e.getScorePercentage(e.minScore()),"%"),a(2),_("ngModel",e.minScore),m("value",e.minScore()),d("aria-label","Minimum match score: "+e.getScorePercentage(e.minScore())+" percent")("aria-valuenow",e.minScore())("aria-valuemin",.5)("aria-valuemax",1)("aria-valuetext",e.getScorePercentage(e.minScore())+" percent - "+e.getScoreLabel(e.minScore())),a(5),x(e.getScoreLabel(e.minScore())))},dependencies:[V,F,G,R,W,B,H,A,K],styles:[".search-options[_ngcontent-%COMP%]{margin-top:var(--spacing-md)}.options-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-sm);width:100%;padding:12px var(--spacing-md);background-color:var(--color-background-primary);border:1px solid var(--color-border-light);border-radius:var(--border-radius-md);cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);font-family:var(--font-family-primary);font-size:var(--font-size-sm);color:var(--color-accent);box-shadow:0 1px 2px #0000000d}.options-toggle[_ngcontent-%COMP%]:hover:not(:disabled){border-color:var(--color-border-medium);background-color:var(--color-background-hover);box-shadow:0 2px 4px #00000014,0 1px 2px #0000000f;transform:translateY(-1px)}.options-toggle[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--color-primary);outline-offset:2px;border-color:var(--color-primary);box-shadow:0 0 0 3px #d32f2f1a}.gear-icon[_ngcontent-%COMP%]{width:20px;height:20px;color:var(--color-text-secondary)}.chevron-icon[_ngcontent-%COMP%]{width:20px;height:20px;color:var(--color-text-secondary);margin-left:auto;transition:transform .3s cubic-bezier(.4,0,.2,1)}.chevron-icon.expanded[_ngcontent-%COMP%]{transform:rotate(180deg)}.options-panel[_ngcontent-%COMP%]{max-height:0;overflow:hidden;transition:max-height .3s cubic-bezier(.4,0,.2,1),opacity .3s cubic-bezier(.4,0,.2,1);opacity:0}.options-panel.expanded[_ngcontent-%COMP%]{max-height:350px;opacity:1}.options-content[_ngcontent-%COMP%]{padding:20px var(--spacing-md);background-color:var(--color-background-secondary);border:1px solid var(--color-border-light);border-top:none;border-radius:0 0 var(--border-radius-md) var(--border-radius-md);margin-top:-1px;transform-origin:top;animation:_ngcontent-%COMP%_expandContent .3s cubic-bezier(.4,0,.2,1)}@keyframes _ngcontent-%COMP%_expandContent{0%{transform:scaleY(.95);opacity:0}to{transform:scaleY(1);opacity:1}}.option-group[_ngcontent-%COMP%]{margin-bottom:20px}.option-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.option-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:var(--font-size-sm);font-weight:var(--font-weight-medium);color:var(--color-accent);margin-bottom:var(--spacing-sm)}.score-value[_ngcontent-%COMP%]{font-weight:var(--font-weight-bold);color:var(--color-primary)}.option-select[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid var(--color-border-light);border-radius:var(--border-radius-sm);background-color:var(--color-background-primary);font-family:var(--font-family-primary);font-size:var(--font-size-sm);color:var(--color-text-primary);cursor:pointer;transition:var(--transition-fast)}.option-select[_ngcontent-%COMP%]:hover{border-color:var(--color-border-medium)}.option-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 3px #d32f2f1a}.slider-container[_ngcontent-%COMP%]{position:relative}.score-slider[_ngcontent-%COMP%]{width:100%;height:6px;-webkit-appearance:none;appearance:none;background:linear-gradient(to right,#ff9800 0% 40%,#4caf50 40% 70%,#2e7d32 70% 100%);border-radius:3px;outline:none;cursor:pointer}.score-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:20px;height:20px;border-radius:50%;background:var(--color-background-primary);border:3px solid var(--color-primary);cursor:pointer;box-shadow:0 2px 4px #0003;transition:var(--transition-fast)}.score-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.1);box-shadow:0 3px 6px #0000004d}.score-slider[_ngcontent-%COMP%]:focus-visible::-webkit-slider-thumb{box-shadow:0 0 0 4px #d32f2f4d;transform:scale(1.15)}.score-slider[_ngcontent-%COMP%]::-moz-range-thumb{width:20px;height:20px;border-radius:50%;background:var(--color-background-primary);border:3px solid var(--color-primary);cursor:pointer;box-shadow:0 2px 4px #0003;transition:var(--transition-fast)}.score-slider[_ngcontent-%COMP%]::-moz-range-thumb:hover{transform:scale(1.1);box-shadow:0 3px 6px #0000004d}.score-slider[_ngcontent-%COMP%]:focus-visible::-moz-range-thumb{box-shadow:0 0 0 4px #d32f2f4d;transform:scale(1.15)}.slider-labels[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:var(--spacing-sm)}.slider-label[_ngcontent-%COMP%]{font-size:var(--font-size-xs);color:var(--color-text-secondary)}.slider-label.middle[_ngcontent-%COMP%]{font-weight:var(--font-weight-medium);color:var(--color-accent)}@media (max-width: 768px){.options-toggle[_ngcontent-%COMP%]{font-size:13px;padding:10px 14px}.options-content[_ngcontent-%COMP%]{padding:var(--spacing-md) 12px}.option-label[_ngcontent-%COMP%]{font-size:13px}.slider-label[_ngcontent-%COMP%]{font-size:11px}}"],changeDetection:0})};export{Y as SearchOptionsComponent};
